import express from "express";
const app = express();

// ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ GET ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£
// ========= í‰ë²”í•œ ë£¨íŠ¸ íŽ˜ì´ì§€ ì ‘ì† í›„  req method ===========
/**
app.get('/', (req, res, next) => {
   
    console.log(`ê²½ë¡œ : ${req.path}`);
    console.log(req.headers)
    console.log(req.query);
    console.log(req.params);
    
    res.send('main Home');
})
*/

// ============= req , res ë¥¼ í†µí•œ ì—¬ëŸ¬ ë©”ì„œë“œ ============
/**
app.get('/person/:id', (req, res, next) => {
    // ============ request ================
    // /Person/ì•„ì´ë””ëª… ìœ¼ë¡œ ì ‘ì†ì‹œ :idì˜ param ì— í•´ë‹¹ê°’ì´ req ë“¤ì–´ì˜¨ë‹¤ 
    console.log(req.params.id);
    ///Person/ì•„ì´ë””ëª…?í‚¤ì›Œë“œëª…=í‚¤ì›Œë“œê°’ ìœ¼ë¡œ í•˜ë©´ queryì— í•´ë‹¹ê°’ì´ req ë“¤ì–´ì˜¨ë‹¤ 
    console.log(req.query.keywords);

    // ============ response================
    // res.send({name:"min"});      JSON ë„ ë³´ë‚´ì¤„ìˆ˜ ìžˆê³ 
    // res.status(201).send('created');    STATUS CODE ìƒíƒœì½”ë“œë„ ë³´ë‚´ì¤„ìˆ˜ ìžˆê³ 
    // res.setHeader('key','value');   Headerë„ ë³´ë‚´ì¤„ìˆ˜ ìžˆë‹¤(key,value ê¼´ë¡œ)

})
 */
// =============== ë¯¸ë“¤ì›¨ì–´ ì²´ì´ë‹ ==================
// ê°™ì€ ê²½ë¡œì— ë™ì¼í•˜ê²Œ ë¯¸ë“¤ì›¨ì–´ ë“±ë¡ì´ ê°€ëŠ¥í•˜ë‹¤ 
// ë˜í•œ í•œ ê²½ë¡œì— ëŒ€í•´ì„œ ì—¬ëŸ¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë“±ë¡ê°€ëŠ¥í•˜ë‹¤ ì•„ëž˜ì²˜ëŸ¼ ,
/**
app.get('/',
    (req, res, next) => {
        // ì‹¤í–‰ì„ í•˜ë©´ ì‘ë‹µ(res) , next ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ firstê°€ ì°ížˆê³  ë¬´ë™ìž‘ ìƒíƒœì´ë‹¤ 
        console.log('first !');
        // ì•„ë¬´ê²ƒë„ ë³´ë‚´ì§€ ì•Šê³  ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ë©´(next()) í˜„ìž¬ ë¼ìš°í„° ì•ˆì— ë‘ë²ˆì§¸ë¡œ ë“±ë¡ëœ ë¯¸ë“¤ì›¨ì–´ë¡œ ê°€ì„œ first2 ë¡œ ì²´ì´ë‹ë˜ì–´ ì‹¤í–‰ëœë‹¤ 
        //next();
        // ë‹¨ route ë¼ëŠ”ê±¸ ë„˜ê¸°ë©´ ë°”ë¡œ ë‹¤ìŒ ì²´ì´ë‹ëœê±´ ì‹¤í–‰ì•ˆë˜ê³  ë„˜ì–´ê°€ì„œ second ê°€ ì°ížŒë‹¤ 
        //next('route');
        // ë³„ë„ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ì—ëŸ¬ë¥¼ ë˜ì§€ë©´ ì—ëŸ¬ê°€ ëœ¬ë‹¤ ê·¸ëž˜ì„œ í•­ìƒ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë§ˆì§€ë§‰ì—ëŠ” app.use ë¥¼ í†µí•´ ì—ëŸ¬ í•¸ë“¤ëŸ¬ë¥¼ ë°˜ë“œì‹œ ë§Œë“¤ì–´ ì£¼ì–´ì•¼ í•œë‹¤ ì•„ëž˜ìª½ ì°¸ê³  !
        //next(new Error());
        // ì•„ë¬´íŠ¼ ê°™ì€ ê²½ë¡œë¡œ ì—¬ëŸ¬ ë¯¸ë“¤ì›¨ì–´ê°€ ìžˆìœ¼ë©´ ë¨¼ì € send í•œë†ˆì´ ì´ê¸°ê±°ë‚˜ next ë“± ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤
        res.send('hello !');
    },
    (req, res, next) => {
        console.log('first2 !');
        next();
    })

app.get('/', (req, res, next) => {
    console.log('sencond !');
})
 */
// ================== ê°€ìž¥ ë§ˆì§€ë§‰ì— ìžˆëŠ” ë‚´ê°€ ì§€ì •í•˜ì§€ ì•Šì€ ê²½ë¡œë¡œ ë“¤ì–´ì˜¤ë©´ ì´ëŸ¬í•œ ì²˜ë¦¬ë¥¼ í•´ì£¼ê² ë‹¤  ==================
/**
app.use((req,res,next)=>{
    res.status(404).send("not found !");
})
 */
// ================== ìœ„ì—ì„œ ë§í–ˆë˜ ì—ëŸ¬ í•¸ë“¤ëŸ¬ ==================
/**
app.use((error,req,res,next)=>{
    console.error(error);
    res.status(500).send("sorry !")     //  ì‚¬ìš©ìžì—ê²ŒëŠ” ì„œë²„ì—ëŸ¬ ìƒíƒœì½”ë“œ 500ê³¼ íŽ˜ì´ì§€ë¥¼ ë˜ì ¸ì¤€ë‹¤
}) */

// ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ POST ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£ðŸ¤£

// ì´ë ‡ê²Œë§Œ í•´ì„œ postman ì—ì„œ ì´ì£¼ë©´ undefinded ê°€ ë‚˜ì˜¨ë‹¤ 
// express ì—ì„œ ìš”ì²­(req) ì˜ body ë¥¼ ì½ìœ¼ë ¤ë©´ express ì—ì„œ ì§€ì›í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤ 
// ì•„ëž˜ì²˜ëŸ¼ ëª¨ë“  JSON ìš”ì²­ì— ëŒ€í•´ ì§€ì›í•´ì£¼ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ì–´ì£¼ë©´ ì•Œì•„ì„œ post ìš”ì²­ì‹œ íŒŒì‹±í•´ì„œ ì²˜ë¦¬í•´ì¤€ë‹¤
app.use(express.json());
app.post('/', (req, res, next) => {
    console.log(req.body);
})

app.listen(8080);